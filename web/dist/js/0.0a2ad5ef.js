webpackJsonp([0],{"1Rkz":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"about",data:function(){return{}}},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"to-be-continue"},[t._v("\n  正在开发中...\n")])},n=[],o=i("XyMi");function r(t){i("nL9e")}var c=!1,l=r,u="data-v-57ce1907",p=null,h=Object(o["a"])(a,s,n,c,l,u,p);e["default"]=h.exports},"8KuX":function(t,e){},"9U4h":function(t,e){},AXCn:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("y9m4"),i("n12u");var a=i("rzQm"),s=i.n(a),n=(i("EuXz"),i("P9l9")),o={name:"copy-list",data:function(){return{columns:[{type:"selection",align:"center",width:60},{title:"选择API",key:"name",width:300},{title:"修改时间",key:"time",width:230}],data:[],shareType:"本机",selectedList:[],localApiList:[],localTarget:"",remoteTarget:"",remoteApiList:[],remoteProjs:[],leftApis:[],showShareResult:!1}},watch:{shareType:function(){this.findProjectApi()},localTarget:function(){this.findProjectApi()},remoteTarget:function(){this.findProjectApi()}},created:function(){var t=this;this.checkProjectList().then(function(){t.$route.query.id?(t.id=t.$route.query.id,t.uid=t.$route.query.uid):t.$Message.error("抱歉，走错了呢")}),this.getRemoteProject()},computed:{projName:function(){return this.$route.query.name},localProjs:function(){return this.$store.state.project.list}},methods:{getRemoteProject:function(){var t=this,e={pageSize:1e4,pageNo:0};return Object(n["k"])(e).then(function(e){var i;e.code||(i=t.remoteProjs).splice.apply(i,[0,t.remoteProjs.length].concat(s()(e.data.list)))})},findProjectApi:function(t,e){var i=this,a="本机"===this.shareType?this.getLocalApiList:this.getRemoteApiList;return a.call(this).then(function(t){var e;if(t&&!t.code){var a=t.data.list.map(function(t){return t.base?Object.assign({},t.base,{time:i.timer(t.base._mt),model:t.model}):Object.assign({},t,{time:i.timer(t._mt)})});(e=i.data).splice.apply(e,[0,i.data.length].concat(s()(a)))}})},getLocalApiList:function(){return this.localTarget?Object(n["v"])({project:this.localTarget,pageSize:5e3,pageNo:0,order:-1,sortBy:"_mt"}):Promise.resolve()},getRemoteApiList:function(){if(!this.remoteTarget)return Promise.resolve();var t={pageSize:1e4,pageNo:0,id:this.remoteTarget,order:-1,sortBy:"_mt"};return Object(n["i"])(t)},copyToLocal:function(t,e){return Object(n["m"])({to:this.id,from:this.from,force:t,forceRemove:e})},copyToAction:function(t,e){var i=this;return("本机"!==this.shareType||this.localTarget)&&("服务端"!==this.shareType||this.remoteTarget)?(this.from=this.selectedList.map(function(t){return"本机"===i.shareType?t._id:t._uid}).join(","),this.from?("本机"===this.shareType?this.copyToLocal(t,e):this.copyFromRemote(t,e)).then(function(e){if(!e.code){var a,n;if(i.$Message.success(e.message),a="本机"===i.shareType?e.data.list[0].apis:e.data.api.fail.map(function(t){return Object.assign({},t.api.base)}),a.length)(n=i.leftApis).splice.apply(n,[0,i.leftApis.length].concat(s()(a))),i.showShareResult=!0;t&&(i.showShareResult=!1)}}):this.$Message.error("请选择API")):this.$Message.error("请选择项目")},copyTo:function(t,e){this.copyToAction()},copyFromRemote:function(t,e){return Object(n["e"])({ids:this.from,project:this.remoteTarget,localProject:this.id,force:t,forceRemove:e})},closeShareResult:function(){this.showShareResult=!1},shareApiAction:function(t,e){this.copyToAction(t,e)},setSelection:function(t){this.selectedList=t}}},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"copy-list"},[i("Card",[i("p",{attrs:{slot:"title"},slot:"title"},[t._v("导入API至"+t._s(t.projName))]),i("Form",{staticClass:"copy-box"},[i("Form-item",{attrs:{label:"选择类型"}},[i("RadioGroup",{attrs:{type:"button"},model:{value:t.shareType,callback:function(e){t.shareType=e},expression:"shareType"}},[i("Radio",{attrs:{label:"本机"}}),i("Radio",{attrs:{label:"服务端"}})],1)],1),i("Form-item",{attrs:{label:"选择项目"}},[i("div",{staticClass:"share-choose"},["服务端"==t.shareType?i("Select",{attrs:{filterable:""},model:{value:t.remoteTarget,callback:function(e){t.remoteTarget=e},expression:"remoteTarget"}},t._l(t.remoteProjs,function(e){return i("Option",{key:e._uid,attrs:{value:e._uid}},[t._v(t._s(e.name))])})):t._e(),"本机"==t.shareType?i("Select",{attrs:{filterable:""},model:{value:t.localTarget,callback:function(e){t.localTarget=e},expression:"localTarget"}},t._l(t.localProjs,function(e){return i("Option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.name))])})):t._e()],1)]),i("Form-item",{attrs:{label:"选择API"}},[i("Table",{staticClass:"share-choose-table",attrs:{columns:t.columns,data:t.data,height:"300",width:"600",size:"small"},on:{"on-selection-change":t.setSelection}})],1),i("Button",{staticStyle:{"margin-top":"30px"},attrs:{type:"primary"},nativeOn:{click:function(e){t.copyTo()}}},[t._v("提交")])],1)],1),i("Modal",{attrs:{width:"360"},model:{value:t.showShareResult,callback:function(e){t.showShareResult=e},expression:"showShareResult"}},[i("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[i("span",[t._v("提交结果")])]),i("div",{staticClass:"cus-share-box",staticStyle:{"text-align":"center"}},[i("p",{staticClass:"cus-info"},[t._v("API冲突个数：\n        "),i("span",{staticClass:"cus-focus"},[t._v(t._s(t.leftApis.length))]),t._v("个。\n      ")]),i("p",{staticStyle:{"text-align":"left"}},t._l(t.leftApis,function(e){return i("span",{key:e._id,staticClass:"copy-api-conflict"},[t._v(t._s(e.name))])})),t.leftApis.length?i("p",{staticClass:"cus-share-tip"},[t._v("提示: 更新会将当前API与已有API合并，删除并更新会删除原API，并插入当前API")]):t._e(),t.leftApis.length?t._e():i("p",{staticClass:"cus-share-tip"},[t._v("恭喜，全部提交成功！")])]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{size:"large"},on:{click:t.closeShareResult}},[t._v("关闭")]),t.leftApis.length?i("Button",{attrs:{type:"warning",size:"large"},on:{click:function(e){t.shareApiAction(1,1)}}},[t._v("删除并更新")]):t._e(),t.leftApis.length?i("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){t.shareApiAction(1,0)}}},[t._v("更新")]):t._e()],1)])],1)},c=[],l=i("XyMi");function u(t){i("wxJE")}var p=!1,h=u,d="data-v-662d01b4",f=null,m=Object(l["a"])(o,r,c,p,h,d,f);e["default"]=m.exports},Awih:function(t,e,i){"use strict";i("EuXz");var a=i("ytD3"),s=i("P9l9"),n={name:"api-card",mixins:[a["a"]],data:function(){return{topBarItems:[{name:"编辑",type:"edit",action:"btnEdit"},{name:"删除",type:"android-remove-circle",action:"btnDelete"},{name:"查看详情",type:"eye",action:"btnView"}],methodList:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"},{value:"PATCH",label:"PATCH"}],libList:[],ModelList:[],throwList:[{value:"301",label:"301"},{value:"304",label:"304"},{value:"400",label:"400"},{value:"401",label:"401"},{value:"404",label:"404"},{value:"500",label:"500"},{value:"502",label:"502"}],modifyPort:8080,modifyDelay:0,modifyPageNo:0,modifyFixedOutput:"",modifyPathEqual:"",modifyPath:"",modifyFixedType:"",modifyFixedWrong:"",modifyFixedBranch:"",modifyFixedThrow:"",modifyUrl:"",modifyMethod:"",modifyKeys:["path","delay","port","pageNo","pathEqual","url","method"]}},props:{name:{type:String},id:{type:String},mt:{type:Number},method:{type:String},project:{type:String},url:{type:String},path:{type:String},pathEqual:{type:String},delay:{type:[Number,String],default:0},fixedOutput:{type:Object},description:{type:String},pageNo:{type:String},fromSearch:{type:Boolean}},watch:{port:function(){this.setModifyData()},id:function(){this.setModifyData()}},computed:{proxyText:function(){var t=["本地","服务器","混合"];return t[this.proxyType]||"未知"},fixedText:function(){var t=["错误","异常","分支"],e=this.fixedOutput&&void 0!==this.fixedOutput.type?t[this.fixedOutput.type]:0;return e?e+" ->"+this.fixedOutput.name:"未设置"}},methods:{submitItem:function(t){t.id=this.id,Object(s["r"])(t).then(this.afterEdit)},submitFixData:function(){var t=this.modifyFixedType,e={type:t,project:this.project,api:this.id};e.id="1"===t?this.modifyFixedWrong:"3"===t?this.modifyFixedBranch:void 0,e.data="2"===t?{code:~~this.modifyFixedThrow}:void 0,Object(s["F"])(e).then(this.afterEdit)},setGData:function(){this.apiInfo.id=this.id,this.apiInfo.project=this.project},setModifyData:function(){var t=this;this.modifyKeys.forEach(function(e){var i="modify"+e[0].toUpperCase()+e.slice(1);void 0!==t[e]&&(t[i]=t[e])})},getSelection:function(){this.getModelList(),this.getLibList()},getLibList:function(){var t=this,e={pageSize:1e3,pageNo:0};Object(s["z"])(e).then(function(e){e.code||(t.libList=e.data.list)})},getModelList:function(){var t=this,e={pageSize:1e3,pageNo:0,baseid:this.id};Object(s["x"])(e).then(function(e){e.code||(t.ModelList=e.data.list)})},shareApi:function(){this.$emit("shareApi",this.id)}},mounted:function(){this.setGData(),this.setModifyData()}},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",{staticClass:"api-card-first"},[i("p",{staticStyle:{"max-width":"70%"},attrs:{slot:"title",title:t.name},slot:"title"},[i("Icon",{attrs:{type:"at"}}),t._v("\n    "+t._s(t.name)+"\n  ")],1),i("template",{slot:"extra"},[t._l(t.topBarItems,function(e){return t.fromSearch?t._e():i("a",{key:e.name,staticClass:"cus-card-tbar-btn",attrs:{href:"javascript:void(0)"}},[i("Icon",{attrs:{type:e.type,color:"#9ea7b4"},nativeOn:{click:function(i){t.btnAction(e.action)}}})],1)}),t.fromSearch?i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.btnAction("btnProject")}}},[t._v("项目详情")]):t._e(),t.fromSearch?i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.btnAction("btnView")}}},[t._v("详情")]):t._e()],2),i("ul",{staticClass:"cus-list-db"},[i("li",[i("span",[t._v("URL")]),i("div",{staticClass:"cus-list-right"},[i("span",{staticClass:"cus-show-value"},[t._v(t._s(t.method||t.url?t.method+" -> "+t.url:"暂无"))]),t.fromSearch?t._e():i("Poptip",{attrs:{placement:"right",width:"300"}},[i("a",{attrs:{href:"javascript:void(0)"}},[t._v("修改")]),i("div",{staticClass:"cus-tooltip",attrs:{slot:"content"},slot:"content"},[i("p",{staticClass:"cus-tooltip-text"},[t._v('URL地址是访问请求的url地址，以 "/" 开头，修改实时生效')]),i("Input",{attrs:{placeholder:"请填写url"},model:{value:t.modifyUrl,callback:function(e){t.modifyUrl=e},expression:"modifyUrl"}}),i("Select",{staticStyle:{"margin-top":"5px"},attrs:{placeholder:"请填写请求方法"},model:{value:t.modifyMethod,callback:function(e){t.modifyMethod=e},expression:"modifyMethod"}},t._l(t.methodList,function(e){return i("Option",{key:e,attrs:{value:e.value}},[t._v(t._s(e.label))])})),i("Button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.submitItem({url:t.modifyUrl,method:t.modifyMethod})}}},[t._v("提交")])],1)])],1)]),i("li",[i("span",[t._v("二级路径")]),i("div",{staticClass:"cus-list-right"},[i("span",{staticClass:"cus-show-value"},[t._v(t._s(t.path||t.pathEqual?t.path+" ==> "+t.pathEqual:"未开启"))]),t.fromSearch?t._e():i("Poptip",{attrs:{placement:"right",width:"300"}},[i("a",{attrs:{href:"javascript:void(0)"}},[t._v("修改")]),i("div",{staticClass:"cus-tooltip",attrs:{slot:"content"},slot:"content"},[i("p",{staticClass:"cus-tooltip-text"},[t._v("指定二级路径后，会先判断URL是否符合，然后判断请求传入的参数指定字段是否和预期值相等。")]),i("Input",{attrs:{placeholder:"请填写指定字段"},model:{value:t.modifyPath,callback:function(e){t.modifyPath=e},expression:"modifyPath"}}),i("Input",{staticStyle:{"margin-top":"5px"},attrs:{placeholder:"请填写字段预期值"},model:{value:t.modifyPathEqual,callback:function(e){t.modifyPathEqual=e},expression:"modifyPathEqual"}}),i("Button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.submitItem({path:t.modifyPath,pathEqual:t.modifyPathEqual})}}},[t._v("提交")])],1)])],1)]),i("li",[i("span",[t._v("延时设置")]),i("div",{staticClass:"cus-list-right"},[i("span",{staticClass:"cus-show-value"},[t._v(t._s(t.delay||"无延时"))]),t.fromSearch?t._e():i("Poptip",{attrs:{placement:"right",width:"300"}},[i("a",{attrs:{href:"javascript:void(0)"}},[t._v("修改")]),i("div",{staticClass:"cus-tooltip",attrs:{slot:"content"},slot:"content"},[i("p",{staticClass:"cus-tooltip-text"},[t._v("延时是指获取数据后延时返回，单位为ms")]),i("div",{staticClass:"cus-tooltip-oneline"},[i("Input-number",{attrs:{min:0,placeholder:"延时时长",size:"small"},model:{value:t.modifyDelay,callback:function(e){t.modifyDelay=e},expression:"modifyDelay"}}),i("Button",{staticStyle:{margin:"0"},attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.submitItem({delay:t.modifyDelay})}}},[t._v("提交")])],1)])])],1)]),i("li",[i("span",[t._v("固定数据")]),i("div",{staticClass:"cus-list-right"},[i("span",{staticClass:"cus-show-value"},[t._v(t._s(t.fixedText))]),t.fromSearch?t._e():i("Poptip",{attrs:{placement:"bottom-end",width:"300"}},[i("a",{attrs:{href:"javascript:void(0)"},on:{click:t.getSelection}},[t._v("修改")]),i("div",{staticClass:"cus-tooltip",attrs:{slot:"content"},slot:"content"},[i("p",{staticClass:"cus-tooltip-text"},[t._v("选择要设置的固定数据")]),i("div",{staticClass:"cus-radio-group"},[i("Radio-group",{attrs:{vertical:""},model:{value:t.modifyFixedType,callback:function(e){t.modifyFixedType=e},expression:"modifyFixedType"}},[i("Radio",{attrs:{label:"1"}},[t._v("错误")]),i("Radio",{attrs:{label:"2"}},[t._v("异常")]),i("Radio",{attrs:{label:"3"}},[t._v("分支")]),i("Radio",{attrs:{label:"0"}},[t._v("无")])],1),i("div",{staticClass:"selection-list"},[i("Select",{staticClass:"radio-select",attrs:{placeholder:"错误",size:"small"},model:{value:t.modifyFixedWrong,callback:function(e){t.modifyFixedWrong=e},expression:"modifyFixedWrong"}},t._l(t.libList,function(e){return i("Option",{key:e,attrs:{value:e._id}},[t._v(t._s(e.name))])})),i("Select",{staticClass:"radio-select",attrs:{placeholder:"异常",size:"small"},model:{value:t.modifyFixedThrow,callback:function(e){t.modifyFixedThrow=e},expression:"modifyFixedThrow"}},t._l(t.throwList,function(e){return i("Option",{key:e,attrs:{value:e.value}},[t._v(t._s(e.label))])})),i("Select",{staticClass:"radio-select",attrs:{placeholder:"分支",size:"small"},model:{value:t.modifyFixedBranch,callback:function(e){t.modifyFixedBranch=e},expression:"modifyFixedBranch"}},t._l(t.ModelList,function(e){return i("Option",{key:e,attrs:{value:e._id}},[t._v(t._s(e.name))])}))],1)],1),i("Button",{staticStyle:{margin:"0"},attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.submitFixData()}}},[t._v("提交")])],1)])],1)]),i("li",[i("span",[t._v("API描述")]),i("span",{staticClass:"cus-description",attrs:{title:t.description}},[t._v("\n        "+t._s(t.description)+"\n      ")])]),i("li",[i("span"),i("span",{staticClass:"cus-list-right cus-list-time"},[t._v("\n        修改于:"+t._s(t.timer(t.mt))+"\n        "),t.fromSearch?t._e():i("a",{staticStyle:{"margin-left":".5em"},attrs:{href:"javascript:void(0)"},on:{click:t.shareApi}},[t._v("贡献此API")])])])])],2)},r=[],c=i("XyMi");function l(t){i("8KuX")}var u=!1,p=l,h="data-v-30fa6c22",d=null,f=Object(c["a"])(n,o,r,u,p,h,d);e["a"]=f.exports},C3W5:function(t,e){},Gyjk:function(t,e){},M8Tx:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"about",data:function(){return{}}},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"about"},[i("h1",[t._v("XMOCKER")]),i("a",{staticClass:"github",attrs:{href:"https://github.com/wenlonghuo/xmocker-cli"}},[i("Icon",{attrs:{type:"social-github",size:"24"}})],1),t._m(0),t._m(1),t._m(2),t._m(3),t._m(4)])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("h2",[t._v("介绍")]),t._v("\n    xmocker是一套提供mock数据的本地工具。通过图形化操作界面，为页面提供相应API，提高开发速度\n  ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("h2",[t._v("主要特色")]),i("ul",[i("li",[t._v("1. 提供界面进行API的编辑")]),i("li",[t._v("2. 本地提供命令式安装，随意修改mock数据，不影响其他人操作")]),i("li",[t._v("3. 简单易用的代理")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("h2",[t._v("安装")]),t._v("\n    本地安装\n    "),i("pre",[t._v("      git clone https://github.com/wenlonghuo/xmocker-cli.git\n      cd xmocker-cli\n      npm link --production\n    ")]),t._v("\n    不需要使用自带的gulp相关功能时，可直接npm安装\n    "),i("pre",[t._v("      npm i -g xmocker-cli\n    ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("h2",[t._v("使用")]),t._v("\n    启动服务\n    "),i("pre",[t._v("      mocker start\n    ")]),t._v("\n    在当前文件夹下启动文件服务器，指定端口为8787，并将所有的404代理至指定网站\n    "),i("pre",[t._v('      mocker here -p 8787 -t "http://www.xxxx.com"\n    ')]),t._v("\n    浏览器访问地址\n    "),i("pre",[t._v("      http://localhost:6001\n    ")]),t._v("\n    更多命令请使用\n    "),i("pre",[t._v("      mocker -h\n    ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("h2",[t._v("致谢")]),t._v("\n    由于定制原因修改了以下库\n    "),i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/koajs/send"}},[t._v("koa-send")])]),i("li",[i("a",{attrs:{href:"https://github.com/oferei/json-gate"}},[t._v("json-gate")])])])])}],o=i("XyMi");function r(t){i("erXe")}var c=!1,l=r,u="data-v-00f1f67e",p=null,h=Object(o["a"])(a,s,n,c,l,u,p);e["default"]=h.exports},MkoZ:function(t,e){},N62b:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("EuXz");var a=i("P9l9"),s={name:"sync-list",data:function(){return{list:{},typeList:[{name:"落后于服务端",key:"behind",download:"base"},{name:"领先于服务端",key:"ahead",download:"base"},{name:"本机独有",key:"clientSide",download:""},{name:"服务端独有",key:"serverSide",download:"all"},{name:"无变化项目",key:"unchanged",download:""},{name:"未知项目",key:"unstaged",download:""}]}},created:function(){this.getSyncData()},filters:{projName:function(t){var e=t.client?t.client:t.server,i=e.shortcut?"("+e.shortcut+")":"";return"".concat(e.name||"").concat(i)}},methods:{getSyncData:function(){var t=this;return Object(a["j"])({}).then(function(e){e.code||(t.list=e.data)})},clientDownLoadProjBase:function(t){var e=this,i=(t.client||t.server)._uid;return Object(a["g"])({id:i}).then(function(t){t.code||e.$Message.success(t.message)})},clientDownLoadProj:function(t){var e=this,i=(t.client||t.server)._uid;return Object(a["f"])({id:i}).then(function(t){t.code||e.$Message.success(t.message)})},linkNext:function(t){t.client&&this.$router.push({name:"同步API",query:{uid:t.client._uid,id:t.client._id,name:t.client.name}})}}},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sync-list"},[t._l(t.typeList,function(e,a){return t.list[e.key]&&t.list[e.key].length?i("Card",{key:a},[i("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),i("div",{staticClass:"sync-body-list"},[t._l(t.list[e.key],function(a,s){return i("Card",{key:s,attrs:{border:"false"}},[i("div",[t._v(t._s(t._f("projName")(a)))]),i("div",["base"===e.download?i("a",{staticStyle:{"margin-right":"10px"},attrs:{href:"javascript:void(0)"},on:{click:function(e){t.clientDownLoadProjBase(a)}}},[i("Icon",{attrs:{type:"arrow-down-a"}})],1):t._e(),"all"===e.download?i("a",{staticStyle:{"margin-right":"10px"},attrs:{href:"javascript:void(0)"},on:{click:function(e){t.clientDownLoadProj(a)}}},[i("Icon",{attrs:{type:"arrow-down-a"}})],1):t._e(),a.client?i("a",{staticStyle:{"margin-right":"10px"},attrs:{href:"javascript:void(0)"},on:{click:function(e){t.linkNext(a)}}},[i("Icon",{attrs:{type:"android-open"}})],1):t._e()])])}),t._l([1,2,3,4,5,6,7,8,9,10],function(t){return i("div",{key:"s"+t})})],2)]):t._e()}),t._l([1,2,3,4,5,6,7,8,9,10],function(t){return i("div",{key:"i"+t})})],2)},o=[],r=i("XyMi");function c(t){i("9U4h")}var l=!1,u=c,p="data-v-0e223b42",h=null,d=Object(r["a"])(s,n,o,l,u,p,h);e["default"]=d.exports},PQJI:function(t,e){},VtQ2:function(t,e,i){"use strict";var a=i("P9l9"),s=i("c+K7"),n={name:"project-card",mixins:[s["a"]],data:function(){return{topBarItems:[{name:"启动",type:"play",action:"btnPlay"},{name:"停止",type:"stop",action:"btnStop"},{name:"刷新",type:"refresh",action:"btnRefresh"}],topDropdownItems:[{name:"查看",type:"eye",action:"btnView"},{name:"编辑",type:"edit",action:"btnEdit"},{name:"删除",type:"android-remove-circle",action:"btnDelete"}],ModifyPath:"",pType:"",ModifyPort:8080}},props:{name:{type:String},status:{type:Number},shortcut:{type:String},id:{type:String},path:{type:String},port:{type:Number},proxyType:{type:Number,default:0},urlList:{type:Array},parentName:{type:String},parentId:{type:String},gulp:{type:Object},staticPath:{type:Array},proxyTable:{type:Array},fromSearch:{type:Boolean}},watch:{path:function(){this.ModifyPath=this.path},port:function(){this.ModifyPort=this.port},proxyType:function(){this.pType=this.proxyType}},computed:{proxyText:function(){var t=["本地","服务器","混合"];return t[this.proxyType]||"未知"},titleColor:function(){return this.status?{"background-color":"#CAE1FF"}:{}}},methods:{submitItem:function(t,e){var i={id:this.id};i[t]=e,Object(a["u"])(i).then(this.afterEdit)},getUrl:function(t){return"http://".concat(window.location.hostname,":").concat(this.port).concat(t.url)}},mounted:function(){this.projInfo.id=this.id}},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",{style:t.titleColor},[i("p",{staticClass:"cus-hover",staticStyle:{"max-width":"70%"},attrs:{slot:"title",title:t.name},on:{click:function(e){t.btnView()}},slot:"title"},[i("Icon",{attrs:{type:"monitor",color:"#9ea7b4"}}),t._v("\n    "+t._s(t.name)+"\n  ")],1),i("template",{slot:"extra"},[t._l(t.topBarItems,function(e){return t.fromSearch?t._e():i("a",{key:e.name,staticClass:"cus-card-tbar-btn",attrs:{href:"javascript:void(0)"}},[i("Icon",{attrs:{type:e.type,color:"#9ea7b4"},nativeOn:{click:function(i){t.btnAction(e.action)}}})],1)}),t.fromSearch?i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.btnAction("btnView")}}},[t._v("详情")]):t._e(),t.fromSearch?t._e():i("Dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:"click",placement:"bottom-end"}},[i("a",{attrs:{href:"javascript:void(0)"}},[i("Icon",{attrs:{type:"more",color:"#9ea7b4"}})],1),i("Dropdown-menu",{attrs:{slot:"list"},slot:"list"},t._l(t.topDropdownItems,function(e){return i("Dropdown-item",{key:e.type,nativeOn:{click:function(i){t.btnAction(e.action)}}},[i("Icon",{staticClass:"cus-dw-icon",attrs:{type:e.type,color:"#9ea7b4"}}),t._v(t._s(e.name)+"\n        ")],1)}))],1)],2),i("ul",{staticClass:"cus-list-db"},[i("li",[i("span",[t._v("项目路径")]),i("div",{staticClass:"cus-list-right"},[i("span",{staticClass:"cus-show-value proj-path",attrs:{title:t.path||"暂无"}},[t._v(t._s(t.path||"暂无"))]),t.fromSearch?t._e():i("Poptip",{attrs:{placement:"right",width:"300"}},[i("a",{attrs:{href:"javascript:void(0)"}},[t._v("修改")]),i("div",{staticClass:"cus-tooltip",attrs:{slot:"content"},slot:"content"},[i("p",{staticClass:"cus-tooltip-text"},[t._v("项目路径用于gulp或提供静态文件服务器，修改后项目会自动重启")]),i("Input",{attrs:{placeholder:"项目路径"},model:{value:t.ModifyPath,callback:function(e){t.ModifyPath=e},expression:"ModifyPath"}}),i("Button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.submitItem("path",t.ModifyPath)}}},[t._v("提交")])],1)])],1)]),i("li",[i("span",[t._v("端口号")]),i("div",{staticClass:"cus-list-right"},[i("span",{staticClass:"cus-show-value"},[t._v(t._s(t.port||"暂未配置"))]),[t.fromSearch?t._e():i("Poptip",{attrs:{placement:"right",width:"300"}},[i("a",{attrs:{href:"javascript:void(0)"}},[t._v("修改")]),i("div",{staticClass:"cus-tooltip",attrs:{slot:"content"},slot:"content"},[i("p",{staticClass:"cus-tooltip-text"},[t._v("端口号是访问数据的端口，纯数字，修改后会自动重启")]),i("div",{staticClass:"cus-tooltip-oneline"},[i("Input-number",{attrs:{max:65535,min:0,placeholder:"端口号",size:"small"},model:{value:t.ModifyPort,callback:function(e){t.ModifyPort=e},expression:"ModifyPort"}}),i("Button",{staticStyle:{margin:"0"},attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.submitItem("port",t.ModifyPort)}}},[t._v("提交")])],1)])])]],2)]),i("li",[i("span",[t._v("404代理模式")]),i("div",{staticClass:"cus-list-right"},[i("span",{staticClass:"cus-show-value"},[t._v(t._s(t.proxyText))]),t.fromSearch?t._e():i("Dropdown",{attrs:{placement:"right-end",trigger:"click"}},[i("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n              修改\n            ")]),i("Dropdown-menu",{attrs:{slot:"list"},slot:"list"},[i("Dropdown-item",{nativeOn:{click:function(e){t.submitItem("proxyType",0)}}},[t._v("本地")]),i("Dropdown-item",{nativeOn:{click:function(e){t.submitItem("proxyType",1)}}},[t._v("服务器")]),i("Dropdown-item",{nativeOn:{click:function(e){t.submitItem("proxyType",2)}}},[t._v("混合")])],1)],1)],1)]),i("li",[i("span",[t._v("自定义链接列表")]),i("div",{staticClass:"cus-list-right"},[i("span",{staticClass:"cus-show-value"},[t._v(t._s(t.urlList&&t.urlList.length||0)+"个")]),t.fromSearch?t._e():i("Poptip",{attrs:{placement:"right",width:"300"}},[t.urlList&&t.urlList.length?i("a",{attrs:{href:"javascript:void(0)"}},[t._v("查看")]):t._e(),i("div",{staticClass:"cus-tooltip",attrs:{slot:"content"},slot:"content"},[i("ul",{staticClass:"cus-tooltip-list"},t._l(t.urlList,function(e){return i("li",{key:e.url},[i("a",{attrs:{href:"javascript:;"}},[t._v(t._s(e.name))]),i("a",{attrs:{href:t.getUrl(e),target:"_blank"}},[t._v(t._s(e.url))])])}))])])],1)]),i("li",[i("span",[t._v("父级项目")]),i("div",{staticClass:"cus-list-right"},[i("span",{staticClass:"cus-show-value"},[t._v(t._s(t.parentName||"暂无"))])])]),i("li",[i("span",[t._v("其他功能")]),i("span",[t.gulp&&Object.keys(t.gulp).length?i("Tag",[t._v("gulp")]):t._e(),t.staticPath&&t.staticPath.length?i("Tag",[t._v("静态资源")]):t._e(),t.proxyTable&&t.proxyTable.length?i("Tag",[t._v("代理")]):t._e()],1)])])],2)},r=[],c=i("XyMi");function l(t){i("Zd1X")}var u=!1,p=l,h=null,d=null,f=Object(c["a"])(n,o,r,u,p,h,d);e["a"]=f.exports},Zd1X:function(t,e){},ZnqC:function(t,e){},bqgb:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("qwQ3"),i("n12u"),i("EuXz");var a=i("90m7"),s=a["a"].methods.timer,n={name:"log-item",data:function(){return{}},props:{info:{type:Object,default:function(){return{}}}},filters:{timeDate:function(t){return t=t||0,s(t).slice(0,10)},timeCount:function(t){return s(t).slice(11,23)},ip:function(t){return t.ip||t.client&&t.client.ip},os:function(t){return t.os&&t.os.name+"-"+t.os.version},msg:function(t){return t.message+(t.err?t.err.msg:"")}},watch:{},mounted:function(){},methods:{getDetail:function(){this.$emit("click",this.info)}}},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",{staticClass:"log-item"},[i("div",{staticClass:"log-item-time",staticStyle:{width:"90px",cursor:"pointer"},on:{click:t.getDetail}},[i("span",[t._v(t._s(t._f("timeDate")(t.info.time)))]),i("span",[t._v(t._s(t._f("timeCount")(t.info.time)))])]),i("div",{staticClass:"log-item-body"},[i("div",{staticStyle:{width:"100%","word-break":"break-all"}},[i("span",[t._v(t._s(t.info.project))]),i("span",[t._v(t._s(t.info.api))]),i("span",[t._v(t._s(t._f("ip")(t.info)))]),i("span",[t._v(t._s(t._f("os")(t.info)))])]),i("div",[t._v("\n      "+t._s(t._f("msg")(t.info))+"\n    ")])])])},r=[],c=i("XyMi");function l(t){i("gXc7"),i("lzPm")}var u=!1,p=l,h="data-v-7aab5ed0",d=null,f=Object(c["a"])(n,o,r,u,p,h,d),m=f.exports,v=i("70Rd"),y=i.n(v);i("ragL");y.a.registerLanguage("json",i("GdJY"));var g=a["a"].methods.timer,_={name:"log-item",data:function(){return{panel:["req"]}},props:{info:{type:Object,default:function(){return{}}}},filters:{timeDate:function(t){return g(t)},ip:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.ip||t.client&&t.client.ip},os:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.os&&"".concat(t.os.name||""," - ").concat(t.os.version||"")},browser:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.browser&&"".concat(t.browser.name||""," - ").concat(t.browser.version||"")},device:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.device||{};if(Object.keys(e).length)return t.device&&"".concat(t.device.type||"",": ").concat(t.device.vendor||""," - ").concat(t.device.model||"")},msg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.data}},computed:{req:function(){return this.lightCode(JSON.stringify(this.info.req||"",null,2))},res:function(){var t=this.info.res;if("string"===typeof this.info.res)try{t=JSON.parse(this.info.res||""),t=JSON.stringify(t,null,2)}catch(t){}else t=JSON.stringify(this.info.res||"",null,2);return this.lightCode(t)},err:function(){return this.lightCode(JSON.stringify(this.info.err||"",null,2))}},watch:{},mounted:function(){},methods:{getDetail:function(){this.$emit("click",this.info)},lightCode:function(t){return y.a.highlight("json",t).value}}},b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",{staticClass:"log-detail"},[i("h3",[t._v("日志详情")]),i("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t._f("timeDate")(t.info.time)))]),i("div",{staticClass:"log-detail-block"},[i("h4",[t._v("基本信息")]),i("div",[i("span",[t._v(t._s(t.info.project))]),i("span",[t._v(t._s(t.info.api))]),i("span",[t._v(t._s(t.info.apiModel))])])]),i("div",{staticClass:"log-detail-block",staticStyle:{width:"100%"}},[i("h4",[t._v("设备信息")]),i("div",[t._v("IP → "+t._s(t._f("ip")(t.info)))]),i("div",[t._v("系统 → "+t._s(t._f("os")(t.info.client)))]),i("div",[t._v("设备 → "+t._s(t._f("device")(t.info.client)))]),i("div",[t._v("浏览器 → "+t._s(t._f("browser")(t.info.client)))]),i("div",{staticStyle:{"font-size":"12px"}},[t._v("UA → "+t._s(t.info.client&&t.info.client.ua))])]),i("div",{staticClass:"log-detail-block"},[i("h4",[t._v("结果")]),t._v("\n    "+t._s(t._f("msg")(t.info))+"\n  ")]),i("h4",{staticStyle:{"margin-top":"10px"}},[t._v("详情")]),i("Collapse",{staticClass:"log-detail-block",model:{value:t.panel,callback:function(e){t.panel=e},expression:"panel"}},[i("Panel",{attrs:{name:"req"}},[t._v("\n      请求参数\n      "),i("pre",{staticClass:"code-area",attrs:{slot:"content"},domProps:{innerHTML:t._s(t.req)},slot:"content"},[t._v("      ")])]),i("Panel",{directives:[{name:"show",rawName:"v-show",value:t.info.res,expression:"info.res"}],attrs:{name:"res"}},[t._v("\n      返回参数\n      "),i("pre",{staticClass:"code-area",attrs:{slot:"content"},domProps:{innerHTML:t._s(t.res)},slot:"content"},[t._v("      ")])]),i("Panel",{directives:[{name:"show",rawName:"v-show",value:t.info.err,expression:"info.err"}],attrs:{name:"error"}},[t._v("\n      错误信息\n      "),i("pre",{staticClass:"code-area",attrs:{slot:"content"},domProps:{innerHTML:t._s(t.err)},slot:"content"},[t._v("      ")])])],1)],1)},k=[];function x(t){i("MkoZ"),i("pfgW")}var j=!1,C=x,w="data-v-38ce80b8",S=null,P=Object(c["a"])(_,b,k,j,C,w,S),T=P.exports,I={name:"log-list",data:function(){return{logType:"error",detail:{},search:{project:"",api:"",apiModel:"",client:{browser:"",device:"",os:""},ip:""}}},components:{logItem:m,detailLog:T},computed:{errList:function(){return this.$store.state.log.error.list},hisList:function(){return this.$store.state.log.his.list},proxyList:function(){return this.$store.state.log.proxy.list},recordList:function(){return this.$store.state.log.record.list},collectorList:function(){return this.$store.state.log.collector.list}},watch:{"search.project":function(){this.searchLog(!0)},"search.api":function(){this.searchLog(!0)},"search.apiModel":function(){this.searchLog(!0)},"search.client.browser":function(){this.searchLog(!0)},"search.client.device":function(){this.searchLog(!0)},"search.ip":function(){this.searchLog(!0)},"search.client.os":function(){this.searchLog(!0)},logType:function(){this.searchLog()}},destroyed:function(){this.removeScrollEvent()},mounted:function(){this.searchLog(),this.addScrollEvent()},methods:{addScrollEvent:function(){var t=this,e=document.querySelectorAll(".tabs-bar-body .ivu-tabs-tabpane");this.tabDoms=[].slice.call(e),this.tabDoms.forEach(function(e){e.addEventListener("scroll",t.scrollEvt)})},removeScrollEvent:function(){var t=this;this.tabDoms.forEach(function(e){e.removeEventListener("scroll",t.scrollEvt)})},scrollEvt:function(t){var e=this,i=t.target.scrollTop+t.target.offsetHeight,a=t.target.scrollHeight;if(!(a-i>30))if(this.isLoading){if(this.debounceScroll)return;clearTimeout(this.debounceScroll),this.debounceScroll=null,this.debounceScroll=setTimeout(function(){e.searchLog()},300)}else this.searchLog()},setDetail:function(t){var e=this;Object.keys(this.detail).forEach(function(t){e.detail[t]=void 0}),this.detail=Object.assign({},this.detail,t)},searchLog:function(t){var e=this;return this.isLoading=!0,this.$store.dispatch("log/GET_LOGS",{type:this.logType,refresh:t,search:this.search}).then(function(){e.isLoading=!1})}}},L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Card",{staticClass:"log-search-bar",staticStyle:{height:"74px"},attrs:{bordered:!1}},[i("h2",{staticClass:"log-title"},[t._v("日志查询")]),i("div",{staticClass:"search-input-item"},[i("Input",{staticClass:"search-item",attrs:{type:"text",placeholder:"项目名称"},model:{value:t.search.project,callback:function(e){t.$set(t.search,"project",e)},expression:"search.project"}}),i("Input",{staticClass:"search-item",attrs:{type:"text",placeholder:"API名称"},model:{value:t.search.api,callback:function(e){t.$set(t.search,"api",e)},expression:"search.api"}}),i("Input",{staticClass:"search-item",attrs:{type:"text",placeholder:"分支名称"},model:{value:t.search.apiModel,callback:function(e){t.$set(t.search,"apiModel",e)},expression:"search.apiModel"}}),i("Input",{staticClass:"search-item",attrs:{type:"text",placeholder:"浏览器"},model:{value:t.search.client.browser,callback:function(e){t.$set(t.search.client,"browser",e)},expression:"search.client.browser"}}),i("Input",{staticClass:"search-item",attrs:{type:"text",placeholder:"设备"},model:{value:t.search.client.device,callback:function(e){t.$set(t.search.client,"device",e)},expression:"search.client.device"}}),i("Input",{staticClass:"search-item",attrs:{type:"text",placeholder:"IP地址"},model:{value:t.search.ip,callback:function(e){t.$set(t.search,"ip",e)},expression:"search.ip"}}),i("Input",{staticClass:"search-item",attrs:{type:"text",placeholder:"系统"},model:{value:t.search.client.os,callback:function(e){t.$set(t.search.client,"os",e)},expression:"search.client.os"}})],1)]),i("div",{staticClass:"tabs-bar"},[i("Card",{staticClass:"log-tab",attrs:{bordered:!1}},[i("Tabs",{staticClass:"tabs-bar-body",model:{value:t.logType,callback:function(e){t.logType=e},expression:"logType"}},[i("Tab-pane",{attrs:{label:"错误",name:"error"}},t._l(t.errList,function(e){return i("logItem",{key:e.time,attrs:{info:e},on:{click:t.setDetail}})})),i("Tab-pane",{attrs:{label:"历史",name:"his"}},t._l(t.hisList,function(e){return i("logItem",{key:e.time,attrs:{info:e},on:{click:t.setDetail}})})),i("Tab-pane",{attrs:{label:"代理",name:"proxy"}},t._l(t.proxyList,function(e){return i("logItem",{key:e.time,attrs:{info:e},on:{click:t.setDetail}})})),i("Tab-pane",{attrs:{label:"记录",name:"record"}},t._l(t.recordList,function(e){return i("logItem",{key:e.time,attrs:{info:e},on:{click:t.setDetail}})})),i("Tab-pane",{attrs:{label:"错误上传",name:"collector"}},t._l(t.collectorList,function(e){return i("logItem",{key:e.time,attrs:{info:e},on:{click:t.setDetail}})}))],1)],1),i("detailLog",{staticClass:"log-info-box",attrs:{info:t.detail}})],1)],1)},O=[];function E(t){i("Gyjk"),i("PQJI")}var M=!1,A=E,$="data-v-63d6403c",N=null,D=Object(c["a"])(I,L,O,M,A,$,N);e["default"]=D.exports},"c+K7":function(t,e,i){"use strict";var a=i("P9l9");e["a"]={data:function(){return{projInfo:{}}},methods:{btnEdit:function(){this.$router.push({name:"项目编辑",query:{id:this.projInfo.id}})},btnView:function(){this.$router.push({name:"项目详情",query:{id:this.projInfo.id}})},btnDelete:function(){var t=this;this.$Modal.confirm({title:"是否删除该项目？",content:"<p>删除后将相关的API均会删除且无法恢复</p>",onOk:function(){Object(a["q"])({id:t.projInfo.id}).then(t.afterEdit)}})},btnPlay:function(){Object(a["H"])({id:this.projInfo.id,force:!1}).then(this.afterEdit)},btnRefresh:function(){Object(a["H"])({id:this.projInfo.id,force:!0}).then(this.afterEdit)},btnStop:function(){Object(a["I"])({id:this.projInfo.id}).then(this.afterEdit)},afterEdit:function(t){t.code||(this.$Message.success(t.message),this.freshProject())}}}},eH1p:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("EuXz");var a=i("VtQ2"),s={name:"projectList",data:function(){return{searchVal:""}},components:{projectCard:a["a"]},breadList:{name:"项目列表",menuName:"项目列表",href:-1},computed:{projectList:function(){var t=this;return this.searchVal?this.$store.state.project.list.filter(function(e){return(e.name||"").indexOf(t.searchVal)>=0}):this.$store.getters["project/pagedList"]},pageNo:function(){return this.$store.state.project.pageNo+1},total:function(){return this.$store.getters["project/totalSize"]}},mounted:function(){this.setPageSize(),this.checkProjectList()},methods:{projectNext:function(t,e){this.$store.commit("project/INCREMENT",e)},addProject:function(){this.$router.push({name:"项目编辑"})},setPageSize:function(){var t=document.querySelector(".right-container").getBoundingClientRect(),e=Math.floor((t.width-32)/370),i=Math.floor((t.height-32)/220),a=i*e;this.$store.commit("project/SET_PAGE_SIZE",a<6?6:a)}}},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",{staticClass:"right-container"},[i("p",{attrs:{slot:"title"},slot:"title"},[i("Icon",{attrs:{type:"ios-film-outline"}}),t._v("\n    项目列表\n    "),i("span",{staticClass:"cus-card-left-bar"},[i("Input",{staticStyle:{width:"150px",margin:"0 10px"},attrs:{icon:"search",placeholder:"输入项目名进行检索"},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}}),i("a",{staticClass:"cus-action-link",staticStyle:{"margin-right":"30px"},attrs:{href:"javascript:;"},on:{click:t.addProject}},[i("Icon",{attrs:{type:"plus-round"}}),t._v(" 新建")],1)],1)],1),t.searchVal?t._e():i("template",{slot:"extra"},[i("a",{staticClass:"cus-action-link",attrs:{href:"javascript:;"},on:{click:function(e){t.projectNext(e,-1)}}},[t._v("\n         "),i("Icon",{attrs:{type:"chevron-left"}}),t._v(" \n      ")],1),i("div",{staticClass:"cus-page-info"},[i("span",[t._v(t._s(t.pageNo))]),t._v("/"),i("span",[t._v(t._s(t.total))])]),i("a",{staticClass:"cus-action-link",attrs:{href:"javascript:;"},on:{click:function(e){t.projectNext(e,1)}}},[t._v("\n         "),i("Icon",{attrs:{type:"chevron-right"}}),t._v(" \n      ")],1)]),i("div",{staticClass:"project-list"},[t._l(t.projectList,function(t){return i("projectCard",{key:t._id,staticClass:"cus-proj-card card-color",attrs:{name:t.name,status:t.status,shortcut:t.shortcut,id:t._id,path:t.path,port:t.port,proxyType:t.proxyType,urlList:t.urls,parentName:t.parentName,parentId:t.parentId,gulp:t.gulp,staticPath:t.staticPath,proxyTable:t.proxyTable}})}),t._l([1,2,3,4,5,6,7,8,9,10],function(t){return i("div",{key:t,staticStyle:{height:"0",margin:"0"}})})],2)],2)},o=[],r=i("XyMi");function c(t){i("mmHN")}var l=!1,u=c,p="data-v-54252a55",h=null,d=Object(r["a"])(s,n,o,l,u,p,h);e["default"]=d.exports},erXe:function(t,e){},gXc7:function(t,e){},iZLc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("VjuZ");var a=i("rzQm"),s=i.n(a),n=i("Awih"),o=i("VtQ2"),r=i("P9l9"),c={name:"search",data:function(){return{keyword:"",type:"project",pageSize:20,pageNo:0,list:[]}},components:{apiCard:n["a"],projectCard:o["a"]},mounted:function(){this.keyword=this.$route.query.keyword,this.type=this.$route.query.type,this.getSearch()},methods:{scrollEvt:function(t){var e=this,i=t.target.scrollTop+t.target.offsetHeight,a=t.target.scrollHeight;if(!(a-i>30))if(this.isLoading){if(this.debounceScroll)return;clearTimeout(this.debounceScroll),this.debounceScroll=null,this.debounceScroll=setTimeout(function(){e.getSearch()},300)}else this.getSearch()},getSearch:function(){var t=this;this.finish||(this.isLoading=!0,Object(r["D"])({keyword:this.keyword,pageNo:this.pageNo,pageSize:this.pageSize,type:this.type}).then(function(e){var i;t.isLoading=!1,e.code||(t.pageNo++,e.data.pagination.pageNo>=e.data.pagination.pageCnt&&(t.finish=!0),(i=t.list).push.apply(i,s()(e.data.list)))}))},delayChange:function(){var t=this;clearTimeout(this.delayHandle),this.delayHandle=setTimeout(function(){t.inputChange()},200)},inputChange:function(){clearTimeout(this.delayHandle),this.lastKeyword!==this.keyword&&(this.finish=!1,this.pageNo=0,this.list.splice(0,this.list.length),this.$router.replace({path:"/search/detail",query:{type:this.type,keyword:this.keyword}}),this.keyword&&(this.lastKeyword=this.keyword,this.getSearch()))}}},l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search"},[i("i-input",{attrs:{type:"text",size:"large",placeholder:"请输入需要搜索的关键词"},on:{"on-enter":t.inputChange,"on-blur":t.inputChange,"on-change":t.delayChange},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[i("Icon",{attrs:{slot:"prepend",type:"search"},slot:"prepend"})],1),"project"===t.type?i("section",{staticClass:"search-result"},[t._m(0),i("main",{staticClass:"search-card-list",on:{scroll:t.scrollEvt}},[t._l(t.list,function(t,e){return i("projectCard",{key:e,attrs:{name:t.name,status:t.status,shortcut:t.shortcut,id:t._id,path:t.path,port:t.port,proxyType:t.proxyType,urlList:t.urls,parentName:t.parentName,parentId:t.parentId,gulp:t.gulp,staticPath:t.staticPath,proxyTable:t.proxyTable,fromSearch:!0}})}),t._l([1,2,3,4,5,6,7,8,9,10],function(t){return i("div",{key:t,staticStyle:{height:"0",margin:"0"}})})],2)]):t._e(),"api"===t.type?i("section",{staticClass:"search-result"},[t._m(1),i("main",{staticClass:"search-card-list",on:{scroll:t.scrollEvt}},[t._l(t.list,function(t,e){return i("apiCard",{key:e,attrs:{name:t.name,id:t._id,method:t.method,project:t.project,url:t.url,path:t.path,pathEqual:t.pathEqual,delay:t.delay,fixedOutput:t.fixedOutput,description:t.description,pageNo:t.pageNo,fromSearch:!0}})}),t._l([1,2,3,4,5,6,7,8,9,10],function(t){return i("div",{key:t,staticStyle:{height:"0",margin:"0"}})})],2)]):t._e()],1)},u=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",[i("h2",[t._v("项目搜索结果")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",[i("h2",[t._v("API搜索结果")])])}],p=i("XyMi");function h(t){i("ZnqC")}var d=!1,f=h,m="data-v-dfaf166a",v=null,y=Object(p["a"])(c,l,u,d,f,m,v);e["default"]=y.exports},lc6e:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("rzQm"),s=i.n(a),n=(i("VjuZ"),i("Awih")),o=i("VtQ2"),r=i("P9l9"),c={name:"search",data:function(){return{keyword:"",pageSize:6,project:{list:[],total:0},api:{list:[],total:0},lib:{list:[],total:0}}},components:{apiCard:n["a"],projectCard:o["a"]},mounted:function(){this.keyword=this.$route.query.keyword||"",this.getMaxNumber(),this.inputChange()},methods:{getSearch:function(){var t=this;Object(r["D"])({keyword:this.keyword,pageNo:0,pageSize:this.pageSize}).then(function(e){e.code||(t.setList(t.project,e.data.project),t.setList(t.api,e.data.api),t.setList(t.lib,e.data.lib))})},delayChange:function(){var t=this;clearTimeout(this.delayHandle),this.delayHandle=setTimeout(function(){t.inputChange()},200)},inputChange:function(){clearTimeout(this.delayHandle),this.lastKeyword!==this.keyword&&(this.$router.replace({path:"/search",query:{keyword:this.keyword}}),this.keyword&&(this.lastKeyword=this.keyword,this.getSearch()))},setList:function(t,e){var i;(t.total=e.total,t.list.splice(0,t.list.length),e.list)&&(i=t.list).push.apply(i,s()(e.list))},getMaxNumber:function(){var t=document.querySelector(".search"),e=t.getBoundingClientRect(),i=Math.floor((e.width-20)/316);this.pageSize=2*i},getMore:function(t){this.$router.push({path:"/search/detail",query:{type:t,keyword:this.keyword}})}}},l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search"},[i("i-input",{attrs:{type:"text",size:"large",placeholder:"请输入需要搜索的关键词"},on:{"on-enter":t.inputChange,"on-blur":t.inputChange,"on-change":t.delayChange},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[i("Icon",{attrs:{slot:"prepend",type:"search"},slot:"prepend"})],1),t.project.total?i("section",{staticClass:"search-result"},[i("header",[i("h2",[t._v("项目搜索结果")]),i("a",{on:{click:function(e){t.getMore("project")}}},[i("Icon",{attrs:{type:"grid"}}),t._v("\n        查看全部\n      ")],1)]),i("main",{staticClass:"search-card-list"},[t._l(t.project.list,function(t,e){return i("projectCard",{key:"c"+e,attrs:{name:t.name,status:t.status,shortcut:t.shortcut,id:t._id,path:t.path,port:t.port,proxyType:t.proxyType,urlList:t.urls,parentName:t.parentName,parentId:t.parentId,gulp:t.gulp,staticPath:t.staticPath,proxyTable:t.proxyTable,fromSearch:!0}})}),t._l([1,2,3,4,5,6,7,8,9,10],function(t){return i("div",{key:t,staticStyle:{height:"0",margin:"0"}})})],2)]):t._e(),t.api.total?i("section",{staticClass:"search-result"},[i("header",[i("h2",[t._v("API搜索结果")]),i("a",{on:{click:function(e){t.getMore("api")}}},[i("Icon",{attrs:{type:"grid"}}),t._v("\n        查看全部\n      ")],1)]),i("main",{staticClass:"search-card-list"},[t._l(t.api.list,function(t,e){return i("apiCard",{key:"d"+e,attrs:{name:t.name,id:t._id,method:t.method,project:t.project,url:t.url,path:t.path,pathEqual:t.pathEqual,delay:t.delay,fixedOutput:t.fixedOutput,description:t.description,pageNo:t.pageNo,fromSearch:!0}})}),t._l([1,2,3,4,5,6,7,8,9,10],function(t){return i("div",{key:"e"+t,staticStyle:{height:"0",margin:"0"}})})],2)]):t._e()],1)},u=[],p=i("XyMi");function h(t){i("C3W5")}var d=!1,f=h,m="data-v-193be344",v=null,y=Object(p["a"])(c,l,u,d,f,m,v);e["default"]=y.exports},lzPm:function(t,e){},mmHN:function(t,e){},nL9e:function(t,e){},pfgW:function(t,e){},ragL:function(t,e){},wxJE:function(t,e){},ytD3:function(t,e,i){"use strict";var a=i("P9l9");e["a"]={data:function(){return{apiInfo:{}}},methods:{btnView:function(){this.$router.push({name:"API详情",query:{id:this.apiInfo.id,project:this.apiInfo.project}})},btnProject:function(){this.$router.push({name:"项目详情",query:{id:this.apiInfo.project}})},btnEdit:function(){this.$router.push({name:"API编辑",query:{id:this.apiInfo.id,project:this.apiInfo.project}})},btnDelete:function(){var t=this;this.$Modal.confirm({title:"是否删除该API？",content:"<p>删除后将相关的分支均会删除且无法恢复</p>",onOk:function(){Object(a["n"])({id:t.apiInfo.id}).then(t.afterEdit)}})},afterEdit:function(t){t.code||(this.$Message.success(t.message),this.$emit("delete"))}}}}});
//# sourceMappingURL=0.0a2ad5ef.js.map